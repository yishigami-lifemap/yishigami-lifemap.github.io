import{_ as x}from"./C7GUWVv3.js";import{_ as y}from"./Cv_Dthgp.js";import{_ as g}from"./BIc47rTb.js";import{g as L,p as N,q as T,n as C,j as l,k as j,s as B,c as a,a as e,m as w,l as t,b as p,t as u,w as k,o as r,d as f,_ as H}from"#entry";const M={class:"p-work"},D={class:"p-work__wrapper"},V={class:"p-work__container"},I={class:"p-work__inner"},$={key:0,class:"p-work__loading"},E={key:1,class:"p-work__error"},P={key:2,class:"p-work__main"},R={class:"p-work__article"},S={class:"p-work__header"},q={class:"p-work__figure"},z=["src","alt"],A={class:"p-work__meta"},F={class:"p-work__date"},G=["innerHTML"],J=["href"],K={class:"p-work__body"},O={class:"p-work__content"},Q=["innerHTML"],U={class:"p-work__external"},W={class:"p-work__bottom"},X=L({__name:"[id]",setup(Y){const m=N();T();const c=C(()=>Number(m.params.id)),o=l(null),i=l(!1),n=l(null),d=async()=>{if(!c.value||Number.isNaN(c.value)){n.value="不正なIDです";return}i.value=!0,n.value=null;try{const s=await fetch(`https://romanstein.jp/wp-json/wp/v2/web/${c.value}?_embed`,{headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}`);const _=await s.json();o.value=_}catch(s){console.error(s),n.value="データの取得に失敗しました"}finally{i.value=!1}};return j(d),B(()=>m.params.id,d),(s,_)=>{const h=x,v=y,b=g;return r(),a("div",M,[e("div",D,[e("div",V,[e("div",I,[t(i)?(r(),a("div",$,[p(h)])):t(n)?(r(),a("div",E,[e("p",null,u(t(n)),1),e("button",{class:"p-work-detail__retry",onClick:d}," 再試行 ")])):t(o)?(r(),a("div",P,[e("article",R,[e("header",S,[e("figure",q,[e("img",{src:t(o).acf?.web__thumb||t(o)._embedded?.["wp:featuredmedia"]?.[0]?.source_url,alt:t(o)._embedded?.["wp:featuredmedia"]?.[0]?.alt_text||t(o).title.rendered},null,8,z)]),e("div",A,[e("p",F,u(t(o).acf?.web__date||new Date(t(o).date).toLocaleDateString()),1),e("h1",{class:"p-work__title",innerHTML:t(o).title.rendered},null,8,G),t(o).link?(r(),a("a",{key:0,href:t(o).acf?.web__link,class:"p-work__link",target:"_blank"},u(t(o).acf?.web__link),9,J)):w("",!0)])]),e("div",K,[e("div",O,[e("div",{class:"p-work__description",innerHTML:t(o).content.rendered},null,8,Q),e("div",U,[p(v,{href:t(o).acf?.web__link},{default:k(()=>[..._[0]||(_[0]=[f(" サイトを見る ",-1)])]),_:1},8,["href"])])])])]),e("div",W,[p(b,{to:"/works",class:"p-work__backButton"},{default:k(()=>[..._[1]||(_[1]=[f(" 一覧に戻る ",-1)])]),_:1})])])):w("",!0)])])])])}}}),se=H(X,[["__scopeId","data-v-1b6fcc1b"]]);export{se as default};
